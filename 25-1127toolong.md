太久太久没有写了 -- 这是为啥断了，才想起来～

【记得】--补充一下 11.28 的丢失

# 第04章：设计一个限流器


---- 额外的

面试官可能希望你找出系统的瓶颈，并讨论潜在的改进。千万不要说你的设计是完美的，没有什么可以改进的。总有一些东西是可以改进的。这是一个展示你的批判性思维的好机会，并留下一个好的最终印象。
给面试官回顾一下你的设计可能是有用的。如果你提出了几种解决方案，这一点就特别重要。在长时间的会话后，提醒面试官可能会有所帮助。
错误情况（服务器故障、网络丢失等）值得讨论。
运营问题也值得一提。如何监控指标和错误日志？系统如何推广？
如何处理下一个规模曲线也是一个有趣的话题。例如，如果你目前的设计支持100万用户，你需要做什么改变来支持1000万用户？
如果你有更多的时间，可以提出其他改进建议。



给面试官回顾一下你的设计可能是有用的。如果你提出了几种解决方案，这一点就特别重要。在长时间的会话后，提醒面试官可能会有所帮助。 
一定要<font color="red">  【举一反三!!!】--自己的设计or取舍之间，做了些什么？？？， 或者拓展之间些其他的知识 比如什么hash之类的  </font> 


候选人：【 对于产品来说，最重要的功能是什么？？】

面试官：【能够发布帖子并查看朋友的新闻动态。】   【发布】 + 【订阅】

订阅发布：当用户发布帖子时，相应的数据会被写入缓存/数据库，并且该帖子将出现在好友的新闻订阅中。
新闻订阅构建：新闻订阅通过按时间倒序聚合好友的帖子来构建。 【这里会涉及到聚合!!!!】 ---- <ins> <font color="red"> 说了要学数据库吧， 时序数据库，你知道吧？ </font> </ins>

你应该与面试官合作，确定并优先考虑架构中的组件。
值得强调的是，每次面试都是 **不同的**。
<br>
有时，面试官可能会暗示她喜欢专注于高层设计。  【高层次的一些设计】
<br>
有时，对于资深候选人的面试，讨论可能会涉及系统性能特性，主要关注瓶颈和资源估算。 【或者  性能瓶颈】--一些红人 kol--Key Opinion Leader ， 调优、中间件、架构是否合理、是否要加一层，流量预估....

 - <ins> <font color="red"> 一次gc的耗时--健康耗时 </font> </ins>
 - <ins> <font color="red"> 一个4c8g 能承担的qps 大约是？ tps呢？ </font> </ins>
 - <ins> <font color="red"> 网络负载 --- 比如一些视频/音频的上传--大内存之类的, 1, 5, 15 的健康值</font> </ins>

在大多数情况下，面试官可能希望你深入了解某些系统组件的细节。【或者 深入细节的组件】  --- 还有个【存储】！！！其实这个也要说 了解一些
对于 URL 缩短器，深入探讨将长 URL 转换为短 URL 的哈希函数设计是一个有趣的话题， 【短链】
对于一个聊天系统来说，如何减少延迟以及如何支持在线/离线状态是两个有趣的话题。 【上下线】



时间管理是至关重要的，因为你很容易被一些细枝末节所迷惑，而这些细节并不能体现你的能力。
你必须准备好一些信号来展示给面试官。尽量不要陷入不必要的细节中。 
例如，在系统设计面试中，详细谈论Facebook feed排名的EdgeRank算法并不理想，因为这需要很多宝贵的时间，而且并不能证明你在设计可扩展系统方面的能力


【排序规则？？？】--时序数据库！！！

候选人：一个用户最多可以有多少个朋友？

面试官：5000个。

候选人：流量有多大？

面试官：每日活跃用户数为1000万（DAU）。


如果你被要求设计一个新闻订阅系统，你希望问一些问题来帮助理解需求。你和面试官之间的对话可能是这样的：

候选人：这是一个移动应用吗？还是一个网页应用？还是两者兼有？

面试官：两者都有。

候选人：对于产品来说，最重要的功能是什么？？

面试官：能够发布帖子并查看朋友的新闻动态。

候选人：新闻动态是按照时间顺序排列，还是按照特定顺序？ 所谓的特定顺序意味着每篇帖子都有不同的权重。 例如，来自亲密朋友的帖子比来自一个群组的帖子更重要。

面试官：为了简单起见，我们假设动态是按照时间顺序排列的。

候选人：一个用户最多可以有多少个朋友？

面试官：5000个。

候选人：流量有多大？

面试官：每日活跃用户数为1000万（DAU）。

候选人：动态可以包含图像、视频，还是只有文字？

面试官：它可以包含媒体文件，包括图像和视频。

以上是一些你可以问面试官的示例问题。 理解需求并澄清不明确的地方是很重要的。






